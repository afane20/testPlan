/***************************************************
* editAllStudent()
*fills the input fields of editBox with data from selected row
****************************************************/
function editAllStudent(){
 var inputs = $('#editBox > input');
 var cells = this.cells;
 var cellLength = cells.length;

 for (var i = 0; i < cellLength - 2; i++) {
  inputs[i].value = cells[i + 1].innerHTML;   }

  $('#editBox > h2').html("Edit: " + cells[1].innerHTML + " " + cells[2].innerHTML);
  var e = document.getElementById("editBox");
  e.style.display='block';
}

/***************************************************
* editStudent()
*fills the input fields of editBox with data from selected row
****************************************************/
function editStudent(){
 var inputs = $('#editBox > input');
 var cells = this.cells;
 document.getElementById('eStudentId').value = cells[0].innerHTML;    
 document.getElementById('eFirstName').value = cells[1].innerHTML;
 document.getElementById('eLastName').value = cells[2].innerHTML;
 document.getElementById('eInstrument').value  = cells[3].innerHTML;
 document.getElementById('eFestivals').value = cells[4].innerHTML;
 document.getElementById('ePoints').value = cells[5].innerHTML;
 document.getElementById('eLastFestDate').value = cells[6].innerHTML;
 document.getElementById('eGradYear').value = cells[7].innerHTML;

 $('#editBox > h2').html("Edit: " + cells[1].innerHTML + " " + cells[2].innerHTML);
 var e = document.getElementById("editBox");
 e.style.display='block';
}


/***************************************************
* editTeacher()
*fills the input fields of editBox with data from selected row
****************************************************/
function editTeacher(){
 var inputs = $('#editBox > input');
 var cells = this.cells;
 document.getElementById('teacherId').value = cells[1].innerHTML;
 document.getElementById('lastName').value = cells[2].innerHTML;
 document.getElementById('firstName').value = cells[3].innerHTML;
 document.getElementById('uvmtaID').value = cells[4].innerHTML;
 document.getElementById('ePoints').value = cells[5].innerHTML;
 document.getElementById('eLastFestDate').value = cells[6].innerHTML;
 document.getElementById('eGradYear').value = cells[7].innerHTML;

 $('#editBox > h2').html("Edit: " + cells[1].innerHTML + " " + cells[2].innerHTML);
 var e = document.getElementById("editBox");
 e.style.display='block';
}

/***************************************************
* showEdit()
* Shows the editBox
****************************************************/
function showEdit() {
 $('.editBox').show();
}

/***************************************************
* saveEdit()
* placeholder for a save function
****************************************************/
function saveEdit() {
 $('#editBox').hide();
}

/***************************************************
* exitEdit()
* hides the editBox
****************************************************/
function exitEdit() {
 $('.editBox').hide();  
}
/***************************************************
* setHeight
* sets the height of the bottom table to fill the window
****************************************************/
function setHeight() {
  if (getIEVersion().major === "-1") {
    var h = $(window).height() - $('#tableBody').offset().top;
    $('#tableBody').height(h);
  } else {
    var h = $(window).height() - $('.flex').offset().top;
    $('.flex').height(h);
  };
};

/***************************************************
* getIEVersion()
* returns the version # of IE is being used. 
* -1 for other browsers
****************************************************/
function getIEVersion(){
  var agent = navigator.userAgent;
  var reg = /MSIE\s?(\d+)(?:\.(\d+))?/i;
  var matches = agent.match(reg);
  if (matches != null) {
    return { major: matches[1], minor: matches[2] };
  }
  return { major: "-1", minor: "-1" };
}

/***************************************************
* IEStyle
* Swaps the stylesheet to an IE friendly style if on IE
****************************************************/
function IEStyle() {
  if (getIEVersion().major != "-1") {
    $("link[href='../css/uvmta.css'").remove();
    $('head').append('<link rel="stylesheet" href="../css/ie.css" type="text/css" />');
  }
}

/***************************************************
* setDrag()
* Makes draggable elements draggable
****************************************************/
function setDrag(){
  $(".editBox, .tile, .registerBox, #pwdForm, .alertUser").draggable();
}

/***************************************************
* alertUser()
* Alerts the user using a pop up box to confirm or reject changes
* To use, pass the function you wish to call (and an argument array if needed)
* as the first (and second) arguments.  The message and button titles can be
* changed using the last 3 arguments.
****************************************************/
function alertUser(callback, callbackArgumentsArray, message, trueBtnTxt, falseBtnTxt) {
  //initialize variables
  message     = message     || "Are you sure?";
  trueBtnTxt  = trueBtnTxt  || "Yes";
  falseBtnTxt = falseBtnTxt || "No";

  //create Elements
  var alertBox      = document.createElement("div");
  var alertMessage  = document.createElement("p");
  var alertTrueBtn  = document.createElement("button");
  var alertFalseBtn = document.createElement("button");
  
  //create the Text
  var alertMsgTxt = document.createTextNode(message);
  var trueBtnTxt  = document.createTextNode(trueBtnTxt);
  var falseBtnTxt = document.createTextNode(falseBtnTxt);

  //setup the callback
  alertTrueBtn.onclick = function() {
    //make sure our callback is a function
    if (typeof callback ==="function") {
      //check to see if we have arguments to pass to it and
      //pass them if we do.
      if (callbackArgumentsArray) {
        callback.apply(this, callbackArgumentsArray);
      } else {
        callback();
      }
    }
  };

  alertFalseBtn.onclick = function() {
    $('.alertUser').hide();
  }

  //attach text to elements inside the box
  alertMessage.appendChild(alertMsgTxt);
  alertTrueBtn.appendChild(trueBtnTxt);
  alertFalseBtn.appendChild(falseBtnTxt);

  //attach the elements inside the Box to the alert box
  alertBox.appendChild(alertMessage);
  alertBox.appendChild(alertTrueBtn);
  alertBox.appendChild(alertFalseBtn);

  //add a class to the alertBox
  alertBox.className = "alertUser";

  //attach the alertBox to the document
  $('body').append(alertBox);
}
